<!DOCTYPE HTML>
<html lang="en">

<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="Hexo">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="http://example.com">
    <!--SEO-->

<meta name="keywords" content="Docker" />


<meta name="description" content="1 Docker的安装1234567891011# 1 yum 包更新到最新yum update# 2 安装所需要的软件包, yum-util 提供yum-config-manager 功能, ..." />


<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->

<title>
    
    Docker 详解 |
    
    Hexo
</title>

<link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">


<link rel="icon" href="/favicon.ico">

    


<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7.css">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.7.0.css">
<link rel="stylesheet" href="/css/style.css?rev=@@hash.css">

    
<div class="hide">
    <script type="text/javascript">
    var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
    </script>
</div>




    

<meta name="generator" content="Hexo 6.1.0"></head>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->
<body>
    <header class="main-header"  style="background-image:url(
    /./img/banner.jpg)"
     >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='John Doe'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
            <!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
            <img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
        </div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                        <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://example.com">
                        Hexo</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                        <li role="presentation" class="text-center">
                            <a href="/"><i class="fa fa-home"></i>
                                Home</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/"><i class="fa fa-th-list"></i>
                                文章分类</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/tags/"><i class="fa fa-tags"></i>
                                标签</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/archives/"><i class="fa fa-archive"></i>
                                归档</a>
                        </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="Docker 详解">
            
            Docker 详解
            
        </h1>
        <div class="post-meta">
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a class="category-link" href="/categories/Docker/">Docker</a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            <a class="tag-none-link" href="/tags/Docker/" rel="tag">Docker</a>
            
        </span>
    </span>
    
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">
            2018/12/02</span>
    </span>
    
    
</div>
        
        
    </div>
    
    <div class="post-body post-content">
        <h2 id="1-Docker的安装"><a href="#1-Docker的安装" class="headerlink" title="1 Docker的安装"></a>1 Docker的安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1 yum 包更新到最新</span></span><br><span class="line">yum update</span><br><span class="line"><span class="comment"># 2 安装所需要的软件包, yum-util 提供yum-config-manager 功能, 另外两个是 devicemapper驱动以来的</span></span><br><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"><span class="comment"># 3 设置yum 源</span></span><br><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"><span class="comment"># 4 安装docker 出现输入的界面都按y</span></span><br><span class="line">yum install -y docker-ce</span><br><span class="line"><span class="comment"># 5 查看docker的版本, 验证是否安装成功</span></span><br><span class="line">docker -v</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-Docker-架构"><a href="#2-Docker-架构" class="headerlink" title="2 Docker 架构"></a>2 Docker 架构</h2><p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200319155859.png"></p>
<h2 id="3-配置镜像加速器"><a href="#3-配置镜像加速器" class="headerlink" title="3 配置镜像加速器"></a>3 配置镜像加速器</h2><p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200319160447.png"></p>
<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200319160350.png"></p>
<h2 id="4-Docker-服务相关命令"><a href="#4-Docker-服务相关命令" class="headerlink" title="4 Docker 服务相关命令"></a>4 Docker 服务相关命令</h2><ul>
<li><p>启动docker服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>
</li>
<li><p>停止docker服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop docker</span><br></pre></td></tr></table></figure>


</li>
<li><p>重启docker服务</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>


</li>
<li><p>查看docker服务状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status docker</span><br></pre></td></tr></table></figure>
</li>
<li><p>开机启动docker服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看docker 日志</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs 容器名</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-Docker-镜像相关命令"><a href="#5-Docker-镜像相关命令" class="headerlink" title="5 Docker 镜像相关命令"></a>5 Docker 镜像相关命令</h2><ul>
<li><p>查看本地镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br><span class="line"><span class="comment"># REPOSITORY  指的是容器</span></span><br><span class="line"><span class="comment"># TAG         指的是版本号</span></span><br><span class="line"><span class="comment"># IMAGE ID    镜像的id</span></span><br><span class="line"><span class="comment"># CREATED     创建时间</span></span><br><span class="line"><span class="comment"># SIZE        大小</span></span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200319161406.png"></p>
</li>
<li><p>搜索镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search redis</span><br></pre></td></tr></table></figure>
</li>
<li><p>下载镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker pull redis</span><br><span class="line"><span class="comment"># 不写版本号 默认是 lastest</span></span><br><span class="line"><span class="comment">#  我们在hub.docker.com  搜索 软件版本号</span></span><br><span class="line">docker pull redis:5.0</span><br><span class="line"><span class="comment">#  下载 5.0 版本的 redis</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>删除镜像</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># id 删除</span></span><br><span class="line">docker rmi 镜像<span class="built_in">id</span></span><br><span class="line"><span class="comment"># 版本删除</span></span><br><span class="line">docker rmi redis:版本</span><br><span class="line"><span class="comment"># 查看所有镜像的id</span></span><br><span class="line">docker images -q</span><br><span class="line"><span class="comment"># 删除所有镜像</span></span><br><span class="line">docker rmi `docker images -q`</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="6-Docker-容器相关命令"><a href="#6-Docker-容器相关命令" class="headerlink" title="6 Docker 容器相关命令"></a>6 Docker 容器相关命令</h2><p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200319164153.png"></p>
<ul>
<li><p>创建容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1 查看镜像</span></span><br><span class="line">docker images</span><br><span class="line"><span class="comment"># 创建容器</span></span><br><span class="line">docker run -it --name=c1  mysql:5.7 /bin/bash</span><br><span class="line"><span class="comment"># -i 表示 容器一直运行着</span></span><br><span class="line"><span class="comment"># -t  表示  给容器加个伪终端</span></span><br><span class="line"><span class="comment"># -d  以守护式 模式创建容器</span></span><br><span class="line"><span class="comment"># -name 表示 起名字 后面可以 = 或者空格</span></span><br><span class="line"><span class="comment"># 指定镜像 mysql:5.7</span></span><br><span class="line"><span class="comment"># /bin/bash 表示进入容器时的初始化指令 默认是 /bin/bash</span></span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200319163047.png"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用exit 退出容器</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong> :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 -it 创建的容器</span></span><br><span class="line">		<span class="comment"># 创建成功会立马进入容器</span></span><br><span class="line">		<span class="comment"># 在退出容器后会立马停止容器</span></span><br></pre></td></tr></table></figure>

<p>创建后台运行的容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  创建的容器会在后台运行.</span></span><br><span class="line">docker run -<span class="built_in">id</span> --name=m2 mysql:5.7</span><br></pre></td></tr></table></figure>


</li>
<li><p>查看容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看正在运行的容器</span></span><br><span class="line">docker ps</span><br><span class="line"><span class="comment"># 查看所有容器</span></span><br><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it 容器名 /bin/bash</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start 容器名</span><br></pre></td></tr></table></figure>
</li>
<li><p>停止容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop 容器名</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span>  容器名</span><br><span class="line"><span class="comment"># 开启的容器是不能被删除</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>容器其他信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect 容器名</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看容器日志</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs 容器名</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="容器启动错误解决"><a href="#容器启动错误解决" class="headerlink" title="容器启动错误解决"></a>容器启动错误解决</h4><ul>
<li><p>Errcode: 13 - Permission denied)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  在创建容器时 加上</span></span><br><span class="line">-–privileged=true</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="7-Docker-容器的-数据卷"><a href="#7-Docker-容器的-数据卷" class="headerlink" title="7 Docker 容器的 数据卷"></a>7 Docker 容器的 数据卷</h2><ul>
<li><p>数据卷的简介</p>
<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200319165053.png"></p>
</li>
<li><p>配置数据卷</p>
<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200319165302.png"></p>
</li>
</ul>
<h3 id="数据卷容器"><a href="#数据卷容器" class="headerlink" title="数据卷容器"></a>数据卷容器</h3><ul>
<li><p>简介</p>
<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200319170418.png"></p>
</li>
<li><p>配置数据卷容器</p>
<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200319170531.png"></p>
</li>
<li><p>数据卷目录 位置查找</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找容器的具体信息</span></span><br><span class="line">docker inspect 容器名</span><br></pre></td></tr></table></figure>

<p>查找宿主机数据目录与容器对应目录</p>
<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200319170911.png"></p>
</li>
</ul>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200319171332.png"></p>
<h2 id="8-Docker的应用部署"><a href="#8-Docker的应用部署" class="headerlink" title="8 Docker的应用部署"></a>8 Docker的应用部署</h2><h3 id="Docker-部署-mysql"><a href="#Docker-部署-mysql" class="headerlink" title="Docker 部署 mysql"></a>Docker 部署 mysql</h3><ul>
<li><p>1 搜索 mysql</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search mysql</span><br></pre></td></tr></table></figure>
</li>
<li><p>2 拉取mysql 镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull  mysql:5.7</span><br></pre></td></tr></table></figure>
</li>
<li><p>3 创建容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1 在/root 下创建mysql 目录 用于存储mysql数据信息</span></span><br><span class="line"><span class="built_in">mkdir</span> ~/mysql</span><br><span class="line"><span class="built_in">cd</span> ~/mysql</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -<span class="built_in">id</span> \</span><br><span class="line">-p 3306:3306 \</span><br><span class="line">--name=c_mysql \</span><br><span class="line">-v <span class="variable">$PWD</span>/conf:/etc/mysql/conf.d \</span><br><span class="line">-v <span class="variable">$PWD</span>/logs:/logs \</span><br><span class="line">-v <span class="variable">$PWD</span>/data:/var/lib/mysql \</span><br><span class="line">-e MYSQL_ROOT_PASSWORD=951228 \</span><br><span class="line">mysql:5.7</span><br></pre></td></tr></table></figure>

<ul>
<li><p>参数说明</p>
<ul>
<li>-p 3307:3306  将容器的3306端口映射到宿主机的3307端口</li>
<li>-v $pwd&#x2F;conf:&#x2F;etc&#x2F;mysql&#x2F;conf.d  将主机当前目录下的conf&#x2F;my.cnf 挂在到容器的 &#x2F;etc.mysql&#x2F;my.cnf 配置目录</li>
<li>-v $pwd&#x2F;logs:&#x2F;logs  将 主机当前目录下的logs 目录挂在到容器的&#x2F;logs   日志目录</li>
<li>-v $pwd&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql  讲主机当前目录下的data 目录 挂载到容器的 &#x2F;var&#x2F;lib&#x2F;mysql   数据目录</li>
<li>-e MYSQL_ROOT_PASSWORD&#x3D;123456  初始化root用户的密码</li>
</ul>
</li>
<li><p>Mysql 5.7 默认配置文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For advice on how to change settings please see</span></span><br><span class="line"><span class="comment"># http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html</span></span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Remove leading # and set to the amount of RAM for the most important data</span></span><br><span class="line"><span class="comment"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span></span><br><span class="line"><span class="comment"># innodb_buffer_pool_size = 128M</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Remove leading # to turn on a very important data integrity option: logging</span></span><br><span class="line"><span class="comment"># changes to the binary log between backups.</span></span><br><span class="line"><span class="comment"># log_bin</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># These are commonly set, remove the # and set as required.</span></span><br><span class="line"><span class="comment"># basedir = .....</span></span><br><span class="line"><span class="comment"># datadir = .....</span></span><br><span class="line"><span class="comment"># port = .....</span></span><br><span class="line"><span class="comment"># server_id = .....</span></span><br><span class="line"><span class="comment"># socket = .....</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Remove leading # to set options mainly useful for reporting servers.</span></span><br><span class="line"><span class="comment"># The server defaults are faster for transactions and fast SELECTs.</span></span><br><span class="line"><span class="comment"># Adjust sizes as needed, experiment to find the optimal values.</span></span><br><span class="line"><span class="comment"># join_buffer_size = 128M</span></span><br><span class="line"><span class="comment"># sort_buffer_size = 2M</span></span><br><span class="line"><span class="comment"># read_rnd_buffer_size = 2M</span></span><br><span class="line"></span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>docker 中配置默认路径</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/my.cnf</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="Docker-部署-Tomcat"><a href="#Docker-部署-Tomcat" class="headerlink" title="Docker 部署 Tomcat"></a>Docker 部署 Tomcat</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注意  需要进入 tomcat 容器内 把 webapps.disp 改名为 webapps , 不然访问不到主页</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>1 搜索tomcat镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search tomcat</span><br></pre></td></tr></table></figure>
</li>
<li><p>2 拉去tomcat 镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull tomcat</span><br></pre></td></tr></table></figure>
</li>
<li><p>3 创建容器, 设置端口映射, 目录映射</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/tomcat</span><br><span class="line"><span class="built_in">cd</span> ~/tomcat</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -<span class="built_in">id</span> --name=c_tomcat \</span><br><span class="line">-p 8080:8080 \</span><br><span class="line">-v <span class="variable">$PWD</span>:/usr/local/tomcat/webapps \</span><br><span class="line">tomcat</span><br></pre></td></tr></table></figure>

<ul>
<li>参数解释同上</li>
</ul>
</li>
</ul>
<h3 id="Docker-部署-Nginx"><a href="#Docker-部署-Nginx" class="headerlink" title="Docker 部署 Nginx"></a>Docker 部署 Nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注意,  首先要创建nginx.conf 文件 用于管理 容器的nginx</span></span><br><span class="line"><span class="comment">#  在 宿主nginx 文件夹下创建/conf/nginx.conf  用于映射 容器nginx配置文件</span></span><br></pre></td></tr></table></figure>

<p>Nginx 原始配置文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>搜索nginx镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>拉去nginx 镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建nginx 容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/nginx</span><br><span class="line"><span class="built_in">cd</span> <span class="built_in">mkdir</span> ~/nginx</span><br><span class="line"><span class="comment"># 创建 conf 文件夹</span></span><br><span class="line"><span class="built_in">mkdir</span> conf</span><br><span class="line"><span class="comment"># 在conf 文件夹下创建 nginx.conf 文件, 粘贴下面内容</span></span><br><span class="line">vim nginx.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>准备好 nginx 配置文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user  nginx;</span><br><span class="line">worker_processes  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">error_log  /var/log/nginx/error.log warn;</span><br><span class="line">pid        /var/run/nginx.pid;</span><br></pre></td></tr></table></figure>


<p>events {<br>worker_connections  1024;<br>}</p>
<p>http {<br>include       &#x2F;etc&#x2F;nginx&#x2F;mime.types;<br>default_type  application&#x2F;octet-stream;<br><br>log_format  main  ‘$remote_addr - $remote_user [$time_local] “$request” ‘<br>                  ‘$status $body_bytes_sent “$http_referer” ‘<br>                  ‘“$http_user_agent” “$http_x_forwarded_for”‘;<br><br>access_log  &#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log  main;<br><br>sendfile        on;<br>#tcp_nopush     on;<br><br>keepalive_timeout  65;<br><br>#gzip  on;<br><br>include &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;*.conf;<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 创建nginx 容器</span><br><span class="line"></span><br><span class="line">  ```bash</span><br><span class="line">  docker run -id --name=c_nginx \</span><br><span class="line">  -p 80:80 \</span><br><span class="line">  -v $PWD/conf/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line">  -v $PWD/logs:/var/log/nginx \</span><br><span class="line">  -v $PWD/html:/usr/share/nginx/html \</span><br><span class="line">  nginx</span><br></pre></td></tr></table></figure>

<ul>
<li><p>参数说明</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -p 80:80  宿主机80 端口 映射 容器的80端口</span></span><br><span class="line"><span class="comment"># -v $PWD/conf/nginx.conf:/etc/nginx/nginx.conf  使用宿主机 nginx.conf 配置文件映射到 容器的配置文件</span></span><br><span class="line"><span class="comment"># -v $PWD/logs:/var/log/nginx  挂在log 目录文件</span></span><br><span class="line"><span class="comment"># -v $PWD/html:/usr/share/nginx/html</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="Docker-部署-Redis"><a href="#Docker-部署-Redis" class="headerlink" title="Docker 部署 Redis"></a>Docker 部署 Redis</h3><ul>
<li><p>1 搜索 Redis</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search redis</span><br></pre></td></tr></table></figure>
</li>
<li><p>2 拉去镜像</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull redis:<span class="number">5.0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>3 创建容器 映射端口</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -<span class="built_in">id</span> --name=c_redis -p <span class="number">6379</span>:<span class="number">6379</span> redis:<span class="number">5.0</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="9-Docker-镜像原理"><a href="#9-Docker-镜像原理" class="headerlink" title="9 Docker 镜像原理"></a>9 Docker 镜像原理</h2><p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200320110833.png"></p>
<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200320110932.png"></p>
<h2 id="10-Docker-镜像制作"><a href="#10-Docker-镜像制作" class="headerlink" title="10 Docker 镜像制作"></a>10 Docker 镜像制作</h2><h3 id="第一种方式"><a href="#第一种方式" class="headerlink" title="第一种方式"></a>第一种方式</h3><p>容器转镜像</p>
<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200320111346.png"></p>
<h3 id="第二种方式"><a href="#第二种方式" class="headerlink" title="第二种方式"></a>第二种方式</h3><p>dockerfile</p>
<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200320123954.png"></p>
<p>关键字</p>
<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200320124404.png"></p>
<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200320124736.png"></p>
<h4 id="Dockerfile-案例1"><a href="#Dockerfile-案例1" class="headerlink" title="Dockerfile 案例1"></a>Dockerfile 案例1</h4><p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200320200048.png"></p>
<p>构建镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker built -f centos_dockerfile -t itheima_centos:1.0</span><br><span class="line"><span class="comment"># -f  找到 dockerfile 文件</span></span><br><span class="line"><span class="comment"># -t  指定 新镜像的名称及版本</span></span><br></pre></td></tr></table></figure>

<h4 id="Dockerfile-案例2"><a href="#Dockerfile-案例2" class="headerlink" title="Dockerfile 案例2"></a>Dockerfile 案例2</h4><p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200320205055.png"></p>
<h2 id="11-Docker的服务编排"><a href="#11-Docker的服务编排" class="headerlink" title="11 Docker的服务编排"></a>11 Docker的服务编排</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200320205303.png"></p>
<h3 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h3><p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200320205430.png"></p>
<h4 id="1-安装-Docker-Compose"><a href="#1-安装-Docker-Compose" class="headerlink" title="1 安装 Docker Compose"></a>1 安装 Docker Compose</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Compose 目前已经完全支持Linux , Macos 和Windows, 在我们安装Compose 之前, 需要先安装Docker, 下面我们以编译好的二进制包方式安装在Linux系统中.</span></span><br><span class="line">curl -L https://github.com/docker/compose/releases/download/1.22.0/docker-compose=`<span class="built_in">uname</span> -s`-`<span class="built_in">uname</span> -m` -o /usr/local/bin/docker-compose</span><br><span class="line"><span class="comment"># 设置文件可执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> +x /usr/local/bin/docker-compose</span><br><span class="line"><span class="comment"># 查看版本信息</span></span><br><span class="line">docker-compose -version</span><br></pre></td></tr></table></figure>

<h4 id="2-卸载-Docker-Compose"><a href="#2-卸载-Docker-Compose" class="headerlink" title="2 卸载 Docker Compose"></a>2 卸载 Docker Compose</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 而今之宝方式安装的, 删除二进制文件即可</span></span><br><span class="line"><span class="built_in">rm</span> /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>

<h4 id="3-使用"><a href="#3-使用" class="headerlink" title="3 使用"></a>3 使用</h4><ul>
<li><p>1 创建 docker-compose 目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/docker-compose</span><br><span class="line"><span class="built_in">cd</span> ~/docker-compose</span><br></pre></td></tr></table></figure>
</li>
<li><p>2  编写 docker-compose.yml文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&#x27;3&#x27;</span></span><br><span class="line">services:</span><br><span class="line">	nginx:</span><br><span class="line">		image: nginx</span><br><span class="line">		ports:</span><br><span class="line">		 - 80:80</span><br><span class="line">		links:</span><br><span class="line">		 - app</span><br><span class="line">		valumes:</span><br><span class="line">		 - ./nginx/conf.d:/etc/nginx/conf.d</span><br><span class="line">		app:</span><br><span class="line">		 image: app</span><br><span class="line">		 expose:</span><br><span class="line">		  - <span class="string">&quot;8080&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>3 创建.&#x2F;nginx&#x2F;conf.d 目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ./nginx/conf.d</span><br><span class="line"><span class="comment"># -p 表示是在父文件夹</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>4 在 .&#x2F;nginx&#x2F;conf.d 目录下 编写 nginx 的 conf 文件.  文件必须是 conf 文件 名字无所谓</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">		listen 80;</span><br><span class="line">		access_log off;</span><br><span class="line"></span><br><span class="line">		location / &#123;</span><br><span class="line">				proxy_pass http://app:8080;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>5 在 ~&#x2F;docker-compose 目录下 使用 docker-compose 启动容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up</span><br></pre></td></tr></table></figure>
</li>
<li><p>6 测试访问</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">直接访问 nginx</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="12-Docker-私有仓库"><a href="#12-Docker-私有仓库" class="headerlink" title="12 Docker 私有仓库"></a>12 Docker 私有仓库</h2><h3 id="一-私有仓库的搭建"><a href="#一-私有仓库的搭建" class="headerlink" title="一  私有仓库的搭建"></a>一  私有仓库的搭建</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1 拉去私有仓库镜像</span></span><br><span class="line">docker pull registry</span><br><span class="line"><span class="comment"># 2 启动私有仓库容器</span></span><br><span class="line">docker run -<span class="built_in">id</span> --name=registry -p 5000:5000 registry</span><br><span class="line"><span class="comment"># 3 打开浏览器 输入地址  http://私有仓库服务器ip:5000/v2/_catalog , 看到 &#123;&quot;repositories&quot;:[]&#125; 表示私有仓库 搭建成功</span></span><br><span class="line"><span class="comment"># 4 修改daemon.json</span></span><br><span class="line">vim /etc/docker/daemon.json</span><br><span class="line"><span class="comment"># 在上述稳健者添加一个key, 保存退出. 此步用于让docker 新人私有仓库地址; 注意 讲次有仓库服务器ip 修改为自己私有仓库服务器的真是ip</span></span><br><span class="line">&#123;<span class="string">&quot;insecure-registries&quot;</span>:[<span class="string">&quot;私有仓库服务器ip:5000&quot;</span>]&#125;</span><br><span class="line"><span class="comment"># 5 重启 docker 服务</span></span><br><span class="line">systemctl restart docker</span><br><span class="line">docker start registry</span><br></pre></td></tr></table></figure>

<h3 id="二-将-镜像上传至私有仓库"><a href="#二-将-镜像上传至私有仓库" class="headerlink" title="二 将 镜像上传至私有仓库"></a>二 将 镜像上传至私有仓库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1 标记镜像为私有仓库镜像</span></span><br><span class="line">docker tag centos:7 私有仓库服务器ip<span class="string">&quot;5000/contos:7</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2 上传标记镜像</span></span><br><span class="line"><span class="string">docker push 私有仓库服务器ip:5000/centos:7</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<h3 id="三-私有仓库的镜像拉到本地"><a href="#三-私有仓库的镜像拉到本地" class="headerlink" title="三 私有仓库的镜像拉到本地"></a>三 私有仓库的镜像拉到本地</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull 仓库ip:5000/centos:7</span><br><span class="line"><span class="comment"># 拉取镜像到本地</span></span><br></pre></td></tr></table></figure>

<h2 id="13-Docker-与-虚拟机的对比"><a href="#13-Docker-与-虚拟机的对比" class="headerlink" title="13 Docker 与 虚拟机的对比"></a>13 Docker 与 虚拟机的对比</h2><h3 id="Docker-容器虚拟化-与-创痛虚拟机比较"><a href="#Docker-容器虚拟化-与-创痛虚拟机比较" class="headerlink" title="Docker 容器虚拟化 与 创痛虚拟机比较"></a>Docker 容器虚拟化 与 创痛虚拟机比较</h3><p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200320213651.png"></p>
<p><img src="https://gitee.com/qilitang/Img/raw/master/img/20200320214019.png"></p>
<p>[toc]</p>

    </div>
    
    <div class="post-footer">
        <div>
            
            转载声明：
            商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">Qilitang</a>
            
            
        </div>
        <div>
            
        </div>
    </div>
</article>
<div class="article-nav prev-next-wrap clearfix">
    
    <a href="/2019/02/03/Vue%20%20JS%20%E5%AF%B9%E8%B1%A1%E8%A1%A5%E5%85%85/" class="pre-post btn btn-default" title='Js 对象补充'>
        <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
        <span class="hidden-xs">
            Js 对象补充</span>
    </a>
    
    
    <a href="/2017/07/09/crawler%207%20%E5%8A%A8%E4%BD%9C%E9%93%BE,%20%E8%87%AA%E5%8A%A8%E7%99%BB%E5%BD%9512306/" class="next-post btn btn-default" title='bs4实现动作链'>
        <span class="hidden-lg">下一篇</span>
        <span class="hidden-xs">
            bs4实现动作链</span><i class="fa fa-angle-right fa-fw"></i>
    </a>
    
</div>

                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">
            Table of Contents
        </h3>
        
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Docker%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">1 Docker的安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Docker-%E6%9E%B6%E6%9E%84"><span class="toc-text">2 Docker 架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E5%99%A8"><span class="toc-text">3 配置镜像加速器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Docker-%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-text">4 Docker 服务相关命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Docker-%E9%95%9C%E5%83%8F%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-text">5 Docker 镜像相关命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Docker-%E5%AE%B9%E5%99%A8%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-text">6 Docker 容器相关命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3"><span class="toc-text">容器启动错误解决</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Docker-%E5%AE%B9%E5%99%A8%E7%9A%84-%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-text">7 Docker 容器的 数据卷</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%AE%B9%E5%99%A8"><span class="toc-text">数据卷容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-Docker%E7%9A%84%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2"><span class="toc-text">8 Docker的应用部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-%E9%83%A8%E7%BD%B2-mysql"><span class="toc-text">Docker 部署 mysql</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-%E9%83%A8%E7%BD%B2-Tomcat"><span class="toc-text">Docker 部署 Tomcat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-%E9%83%A8%E7%BD%B2-Nginx"><span class="toc-text">Docker 部署 Nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-%E9%83%A8%E7%BD%B2-Redis"><span class="toc-text">Docker 部署 Redis</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-Docker-%E9%95%9C%E5%83%8F%E5%8E%9F%E7%90%86"><span class="toc-text">9 Docker 镜像原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-Docker-%E9%95%9C%E5%83%8F%E5%88%B6%E4%BD%9C"><span class="toc-text">10 Docker 镜像制作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">第一种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">第二种方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Dockerfile-%E6%A1%88%E4%BE%8B1"><span class="toc-text">Dockerfile 案例1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Dockerfile-%E6%A1%88%E4%BE%8B2"><span class="toc-text">Dockerfile 案例2</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-Docker%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%BC%96%E6%8E%92"><span class="toc-text">11 Docker的服务编排</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-Compose"><span class="toc-text">Docker Compose</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85-Docker-Compose"><span class="toc-text">1 安装 Docker Compose</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%8D%B8%E8%BD%BD-Docker-Compose"><span class="toc-text">2 卸载 Docker Compose</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8"><span class="toc-text">3 使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-Docker-%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93"><span class="toc-text">12 Docker 私有仓库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E7%9A%84%E6%90%AD%E5%BB%BA"><span class="toc-text">一  私有仓库的搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E5%B0%86-%E9%95%9C%E5%83%8F%E4%B8%8A%E4%BC%A0%E8%87%B3%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93"><span class="toc-text">二 将 镜像上传至私有仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E7%9A%84%E9%95%9C%E5%83%8F%E6%8B%89%E5%88%B0%E6%9C%AC%E5%9C%B0"><span class="toc-text">三 私有仓库的镜像拉到本地</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-Docker-%E4%B8%8E-%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-text">13 Docker 与 虚拟机的对比</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-%E5%AE%B9%E5%99%A8%E8%99%9A%E6%8B%9F%E5%8C%96-%E4%B8%8E-%E5%88%9B%E7%97%9B%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%AF%94%E8%BE%83"><span class="toc-text">Docker 容器虚拟化 与 创痛虚拟机比较</span></a></li></ol></li></ol>
        
    </div>
</aside>
                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>
<a id="back-to-top" class="icon-btn hide">
    <i class="fa fa-chevron-up"></i>
</a>
    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>
            </div>
            <div class="col-sm-12">
                <span>Copyright &copy;
                    2017
                    
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="#" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>




<script src="/js/app.js?rev=@@hash.js"></script>


</body>
</html>